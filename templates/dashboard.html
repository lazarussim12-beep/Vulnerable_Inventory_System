{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Inventory Dashboard</h2>
  <a class="btn btn-sm btn-outline-primary" href="{{ url_for('add_item') }}">Add Item</a>
</div>

<form method="get" class="row g-2 mb-3">
  <div class="col-auto">
    <input type="text" class="form-control" name="filter" placeholder="Search name" value="{{ filter_value }}">
  </div>
  <div class="col-auto">
    <button class="btn btn-secondary">Filter</button>
  </div>
</form>

{% if total_row %}
<div class="alert alert-info">
  Showing {{ total_row['total_items'] or 0 }} items totalling {{ total_row['total_qty'] or 0 }} units.
</div>
{% endif %}

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Description</th>
        <th>Qty</th>
        <th>Unit Cost</th>
        <th>Last Updated</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item['id'] }}</td>
        <td>{{ item['name'] }}</td>
        <td>{{ item['description'] }}</td>
        <td>{{ item['quantity'] }}</td>
        <td>{{ item['unit_cost'] }}</td>
        <td>{{ item['last_updated'] }}</td>
        <td class="text-end">
          <a href="{{ url_for('edit_item', item_id=item['id']) }}" class="btn btn-sm btn-outline-secondary">Edit</a>
          <form method="post" action="{{ url_for('delete_item', item_id=item['id']) }}" class="d-inline">
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7" class="text-center text-muted">No items found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

